(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4670,5292],{7382:(e,t,n)=>{"use strict";n.d(t,{PublicArtifactAppWrapper:()=>l});var r=n(54568),o=n(90569),a=n(7620),i=n(85028),s=n(19757);let l=e=>{var t;let{artifact:n,remixBaseUrl:l,artifactId:u,activitySessionId:c,shouldTakeSnapshot:d}=e,[f,h]=(0,a.useState)(!1),{data:g}=(0,i.mt)({entityId:u,artifactEntityType:"published_artifact"}),p=(0,a.useMemo)(()=>(null==g?void 0:g.mcp_servers)||[],[g]),m={ArtifactMcpModal:s.I,hasArtifactToolConfig:!!(null==g||null==(t=g.mcp_servers)?void 0:t.length),onManageConnectors:()=>h(!0)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.PublicArtifactContent,{artifact:n,remixBaseUrl:l,artifactId:u,activitySessionId:c,shouldTakeSnapshot:d,...m}),f&&p&&(0,r.jsx)(s.I,{isOpen:f,onClose:()=>h(!1),requestedServers:p,artifactContext:{uuid:u,type:"published_artifact"}})]})}},29670:(e,t,n)=>{"use strict";n.d(t,{LegalDocsProvider:()=>i,S:()=>s});var r=n(54568),o=n(7620);let a=(0,o.createContext)(void 0),i=e=>{let{value:t,children:n}=e;return(0,r.jsx)(a.Provider,{value:t,children:n})};function s(){return(0,o.useContext)(a)}},39480:(e,t,n)=>{"use strict";n.d(t,{ArkoseTokenProvider:()=>m,D5:()=>C,vr:()=>v});var r=n(54568),o=n(1613),a=n(68067),i=n(28044),s=n(56929),l=n(23792),u=n(7620),c=n(44995),d=n(18088);let f="ak-session-token",h=e=>{let{host:t,apiKey:n,nonce:o,integrity:a,onCompleted:i,onShown:s,onShow:c,onHide:d,onError:f,onScriptError:h,setArkoseEnforcement:g}=e,p=e=>{e.setConfig({onCompleted:i,onShown:s,onShow:c,onHide:d,onError:f}),g(e)};return(0,u.useEffect)(()=>()=>{window.setupEnforcement=void 0},[]),(0,r.jsx)(l.default,{id:"arkose-script",src:"https://".concat(t,"/v2/").concat(n,"/api.js"),type:"text/javascript","data-callback":"setupEnforcement",async:!0,defer:!0,onLoad:()=>{window.setupEnforcement||(window.setupEnforcement=p)},onError:h,nonce:o,integrity:a,crossOrigin:"anonymous"})},g=()=>{let e=(0,i.V)(),t=(0,c.fZ)(),n=(0,a.fS)("ak_enabled");return!e&&t&&n},p=(0,u.createContext)({isReady:!1,isChallenging:!1,lastCallerId:void 0,needsToken:!1,startTokenFlow:()=>{}});function m(e){let{host:t,apiKey:n,nonce:o,integrity:a,children:i}=e,[l,c]=(0,u.useState)(g()&&!!t&&!!n&&!!a),[m,v]=(0,u.useState)(void 0),[C,b]=(0,u.useState)(void 0),[S,w]=(0,u.useState)(void 0),[x,y]=(0,u.useState)(!1),[T,P]=(0,d.Vc)(f,void 0),_=l&&!T;return(0,r.jsxs)(p.Provider,{value:{isReady:!!m,isChallenging:x,needsToken:_,lastCallerId:C,startTokenFlow:(e,t)=>{b(e),w(t),null==m||m.run()}},children:[i,l&&(0,r.jsx)(h,{host:t,apiKey:n,nonce:o,integrity:a,onCompleted:e=>{P(e.token),S&&(S(),w(void 0))},onShown:()=>y(!0),onShow:()=>y(!0),onHide:()=>y(!1),onError:e=>{(0,s.Cp)(e.error)},onScriptError:e=>{c(!1),(0,s.Cp)(e)},setArkoseEnforcement:v})]})}function v(){return(0,u.useContext)(p)}let C=()=>{let e=g(),[t,n,r]=(0,d.Vc)(f,void 0),{mutateAsync:a}=(0,o.L2)("api/arkose/verify","POST");return(0,u.useCallback)(async()=>{e&&t&&(r(),await a({session_token:t}))},[e,a,t,r])}},39951:(e,t,n)=>{"use strict";n.d(t,{IQ:()=>a,Jd:()=>r,lx:()=>o});let r=["proMonthlyPromoCode","proAnnualPromoCode","welcomeMessageTitle","utmParams","max5xMonthlyPromoCode","max20xMonthlyPromoCode"],o=e=>{if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},a=(e,t)=>(null==t?void 0:t.overrides)?{...e,...t.overrides}:e},53592:(e,t,n)=>{"use strict";var r,o,a,i,s,l,u,c;n.d(t,{Fd:()=>p,TQ:()=>g,W$:()=>v,YQ:()=>f,a8:()=>h,lX:()=>C,oO:()=>d,un:()=>m});let d=null==(r=globalThis["claude.settings"])?void 0:r.AppConfig,f=null==(o=globalThis["claude.settings"])?void 0:o.Startup,h=null==(a=globalThis["claude.settings"])?void 0:a.GlobalShortcut,g=null==(i=globalThis["claude.settings"])?void 0:i.MCP,p=null==(s=globalThis["claude.settings"])?void 0:s.Extensions,m=null==(l=globalThis["claude.settings"])?void 0:l.FilePickers,v=null==(u=globalThis["claude.settings"])?void 0:u.AppPreferences,C=null==(c=globalThis["claude.settings"])?void 0:c.AppFeatures},63039:(e,t,n)=>{Promise.resolve().then(n.bind(n,7382)),Promise.resolve().then(n.bind(n,88520)),Promise.resolve().then(n.bind(n,80681)),Promise.resolve().then(n.bind(n,8134)),Promise.resolve().then(n.bind(n,4869)),Promise.resolve().then(n.bind(n,32944)),Promise.resolve().then(n.bind(n,50564)),Promise.resolve().then(n.bind(n,10736)),Promise.resolve().then(n.bind(n,81562)),Promise.resolve().then(n.bind(n,79428)),Promise.resolve().then(n.bind(n,82942)),Promise.resolve().then(n.bind(n,27736)),Promise.resolve().then(n.bind(n,53472)),Promise.resolve().then(n.bind(n,45420)),Promise.resolve().then(n.bind(n,77084)),Promise.resolve().then(n.bind(n,7585)),Promise.resolve().then(n.bind(n,56054)),Promise.resolve().then(n.bind(n,90569))},66411:(e,t,n)=>{"use strict";n.d(t,{Cu:()=>_,F7:()=>y,NA:()=>E,VL:()=>P,Vq:()=>k,WX:()=>x,bl:()=>T,nY:()=>w});var r=n(39480),o=n(44995),a=n(55562),i=n(64328),s=n(35984),l=n(29670),u=n(93112),c=n(3743),d=n(39613),f=n(77001),h=n(80688);n(28);var g=n(68067),p=n(4869),m=n(27541),v=n(7620),C=n(94295),b=n(77062),S=n(40459);let w=()=>{let e=(0,m.useRouter)(),t=(0,a.l)();return{refresh:()=>{e.refresh()},switchAndRefresh:(e,n)=>{t.set(d.eT.LAST_ACTIVE_ORG,e),n?location.pathname=n:location.reload()}}},x=(e,t,n)=>{let r=(0,l.S)(),{mutateAsync:o}=(0,C.nX)();return(0,v.useCallback)(async()=>{if(!e||!r||0===t.length)return;let a=t.map(e=>({document_id:"v3:".concat(e,":").concat(r[e]),accepted_via_checkbox:n}));await o({acceptances:a})},[e,r,t,o,n])},y=e=>{let t=(0,l.S)(),{mutateAsync:n}=(0,C.nX)();return(0,v.useCallback)(async r=>{if(!e||!t)return;let o=Object.entries(r).map(e=>{let[n,r]=e;return{document_id:"v3:".concat(n,":").concat(t[n]),accepted_via_checkbox:r}});0!==o.length&&await n({acceptances:o})},[e,t,n])},T=(e,t)=>{let{account:n,refetch:r,setActiveOrganizationUuid:o}=(0,i.YL)(),[a,l]=(0,v.useState)(!1),[u,c]=(0,v.useState)(!1),d=P(),{addSuccess:f}=(0,s.Y)(),{data:g}=(0,C.kd)(e),m=(0,p.useQueryClient)();return(0,v.useEffect)(()=>{n&&a&&u&&(t?t(d):d())},[u,d,a,n,t]),(0,v.useCallback)(async()=>{l(!0);let e=await r();if(await m.invalidateQueries({queryKey:[h.Jz]}),(null==g?void 0:g.organization_uuid)&&(o(g.organization_uuid),f("Successfully joined ".concat(g.organization_name))),e&&"google"in window){var t,n,a;null==(a=window.google)||null==(n=a.accounts)||null==(t=n.id)||t.cancel()}c(!0)},[g,f,r,o,m])},P=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,m.useSearchParams)().get("returnTo"),n=_(e);return(0,v.useCallback)(()=>{n(t)},[n,t])},_=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{account:t}=(0,i.YL)(),[n,a]=(0,v.useState)(!1),s=(0,m.useRouter)(),[l,d]=(0,v.useState)(null),f=(0,m.usePathname)(),h=(0,m.useSearchParams)(),p=(0,o.fZ)(),C=(e=>{let{account:t}=(0,i.YL)(),n=(0,u.y_)(e),o=(0,r.D5)(),a=(0,g.fS)("age_gate_reverification");return((0,v.useEffect)(()=>{t&&o()},[t,o]),t&&((0,c.VH)({account:t,isClaudeDot:e})||(0,c.Bs)(t,e)))?"/onboarding":t&&(0,c.u5)(t,e,a)?"/age-verification":t&&(0,c.NJ)(t,e)?"/invites":t&&(0,c.Ah)(t,e)?"/create":t&&n?"/upgrade":e?"/new":"/dashboard"})(p);return(0,v.useEffect)(()=>{(n||e)&&!t&&s.push((0,b.rt)(f,h.toString()))},[t,s,n,e,f,h]),(0,v.useEffect)(()=>{if(n&&t){let e=(0,b.Cy)(t,l,C,p,!!S.env.NEXT_PUBLIC_SHOW_US_GOVT_SYSTEM_USE_NOTIFICATION);e!==window.location.href.replace(window.location.origin,"")&&(s.push(e),s.refresh())}},[t,s,n,l,C,p]),(0,v.useCallback)(e=>{e&&d(decodeURIComponent(e)),a(!0)},[])};function k(){let[e,t]=(0,v.useState)(!1);return{getRecaptchaToken:(0,v.useCallback)(async(e,n)=>S.env.NEXT_PUBLIC_DISABLE_RECAPTCHA||(0,f.Vm)()?Promise.resolve("recaptcha-ignore-token"):(t(!0),new Promise((r,o)=>{if("undefined"==typeof grecaptcha)return t(!1),o(Error("Recaptcha failed to load"));grecaptcha.enterprise.ready(()=>{grecaptcha.enterprise.execute(e,{action:n}).then(e=>{r(e),t(!1)},e=>{t(!1),o(e)})})})),[]),isLoading:e}}function E(e){let[t,n]=(0,v.useState)(!1);(0,v.useEffect)(()=>{if(!t){let t=setInterval(()=>{(window.grecaptcha||S.env.NEXT_PUBLIC_DISABLE_RECAPTCHA)&&(n(!0),e())},10);return()=>clearInterval(t)}},[t,n,e])}},77062:(e,t,n)=>{"use strict";n.d(t,{CZ:()=>c,Cy:()=>a,HT:()=>l,TR:()=>u,q:()=>s,rt:()=>i});var r=n(3743),o=n(39613);let a=(e,t,n,a,i)=>{if(i&&!localStorage.getItem(o.EB.ACCEPTED_US_GOVERNMENT_SYSTEM_NOTIFICATION))return"/us-govt-system-warning";if(!t||!t.startsWith("/")||"/"===t||"/?"===t)return n;if((0,r.Xs)(e,a)){let e=new URL(n,window.location.origin),r=new URLSearchParams(e.search);return r.set("returnTo",t),"".concat(e.pathname,"?").concat(r.toString())}return s(t)},i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/login",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o="".concat(e,"?").concat(t),a=new URLSearchParams(r);return a.append("returnTo",o),"".concat(n,"?").concat(a.toString())};function s(e){let t=new URL(e,"http://example.com");return t.pathname.replace(/^\/+/,"/")+t.search}function l(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return t&&e.push(...Object.keys(localStorage).filter(e=>e.startsWith("".concat(o.sn,".")))),e.reduce((e,t)=>{let n=localStorage.getItem(t);return null!==n&&e.push([t,n]),e},[])}function u(e){e.forEach(e=>{let[t,n]=e;localStorage.setItem(t,n)})}function c(e){if(!e)return null;try{let t=decodeURIComponent(e);return new URL(t,window.location.origin).searchParams}catch(e){return null}}},90569:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PublicArtifactContent:()=>C});var r=n(54568),o=n(6542),a=n(56054),i=n(15393),s=n(78540),l=n(64328),u=n(57291),c=n(7620),d=n(7585),f=n(66411),h=n(23812),g=n(3075),p=n(98304),m=n(59666);let v=e=>{let{isOpen:t,onClose:n,baseUrl:o,publishedArtifactUuid:a}=e,i=(0,f.Cu)();return(0,r.jsxs)(g.aF,{isOpen:t,onClose:n,children:[(0,r.jsx)(h.$,{variant:"ghost",size:"unset",className:"text-text-300 h-6 w-6 rounded-md active:scale-90 !absolute top-4 right-4",onClick:n,children:(0,r.jsx)(p.X,{size:16})}),(0,r.jsxs)("div",{className:"flex flex-col gap-6 mt-4",children:[(0,r.jsx)("p",{className:"text-lg font-medium",children:(0,r.jsx)(m.A,{defaultMessage:"You need a Claude account to use this artifact",id:"jzcrjmVTFk"})}),(0,r.jsx)("p",{children:(0,r.jsx)(m.A,{defaultMessage:"Log in to Claude to use or customize this artifact. No account? You can create one for free.",id:"2iPAwj1yCC"})}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(h.$,{variant:"primary",onClick:()=>i(window.location.href),href:"".concat(o,"/login?returnTo=").concat(encodeURIComponent("/public/artifacts/".concat(a))),className:"flex-1",target:window===window.top?"_self":"_blank",children:(0,r.jsx)(m.A,{defaultMessage:"Log in",id:"odXlk858Gb"})})})]})]})},C=e=>{let{artifact:t,remixBaseUrl:n,artifactId:f,activitySessionId:h,shouldTakeSnapshot:g,ArtifactMcpModal:p,hasArtifactToolConfig:m,onManageConnectors:C}=e,b=t.type===u.vU.Text,[S,w]=(0,c.useState)(!1),{account:x}=(0,l.YL)(),{mutate:y}=(0,o.b5)(f,h),T=(0,c.useRef)(y);T.current=y;let P=(0,c.useRef)(null),[_,k]=(0,c.useState)(!1),[E,A]=(0,c.useState)(!1),{mutateAsync:I}=(0,o.AH)(),O=(0,i.f)({artifactContext:{uuid:f,type:"published_artifact"},onMissingOrganization:()=>{throw w(!0),Error("An error occurred")}}),j=(0,s.j)({artifactContext:{uuid:f,type:"published_artifact"},onMissingOrganization:()=>{w(!0)}}),M=(0,c.useMemo)(()=>({claudeComplete:O,storage:j}),[O,j]);return(0,c.useEffect)(()=>{T.current({account_uuid:null==x?void 0:x.uuid})},[f,h,null==x?void 0:x.uuid]),(0,c.useEffect)(()=>{if(!_||!P.current||!x||E)return;let e=window.innerWidth,t=window.innerHeight;!g[e<768?"mobile":"desktop"]||e<320||t<480||e>2560||t>1600||(A(!0),(async()=>{try{var n;let r=await (null==(n=P.current)?void 0:n.getDOMSnapshot());r&&await I({domSnapshot:r,publishedArtifactUuid:f,viewportWidth:e,viewportHeight:t})}catch(e){}})())},[_,f,g,x,I,E]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.ArtifactFrame,{artifact:t,publishedArtifactUuid:f,remixBaseUrl:n,hasArtifactToolConfig:m,onManageConnectors:C,children:(0,r.jsx)(a.k,{isOpen:!0,content:t.content,type:t.type,language:t.language,showRaw:b,isCurrentStreaming:!1,richSandboxCapabilities:M,artifactContext:{uuid:f,type:"published_artifact"},richSandboxRef:P,showLoginModal:()=>w(!0),onDOMContentLoaded:()=>{k(!0)},ArtifactMcpModal:p})}),(0,r.jsx)(v,{isOpen:S,onClose:()=>w(!1),baseUrl:n,publishedArtifactUuid:f})]})}},93112:(e,t,n)=>{"use strict";n.d(t,{Hc:()=>g,XK:()=>p,Zl:()=>v,hz:()=>h,y_:()=>m});var r=n(1613),o=n(55562),a=n(35984),i=n(39613),s=n(80688),l=n(68067),u=n(7620),c=n(10369),d=n(24407),f=n(39951);function h(){var e;let t=(0,o.l)(),n=null!=(e=t.get(i.eT.PROMOTION))?e:null;return{data:(0,f.lx)(n),mutate:(0,u.useCallback)(e=>{t.set(i.eT.PROMOTION,JSON.stringify(e),{maxAgeSeconds:7776e3})},[t]),delete:(0,u.useCallback)(()=>{t.delete(i.eT.PROMOTION)},[t])}}function g(){var e,t,n;let{data:o}=h(),a=(t=null!=(e=null==o?void 0:o.promotionId)?e:null,n=e=>(0,f.IQ)(e,o),(0,r.Sk)("/api/billing/promotion/".concat(t),{queryKey:[s.t6,t],enabled:!!t,meta:{noToast:!0}},e=>(e.promotionId=t,n)?n(e):e));return{...a,isPending:a.isPending&&!!(null==o?void 0:o.promotionId)}}function p(){let{data:e,mutate:t}=h();(0,u.useEffect)(()=>{(null==e?void 0:e.needsCheckout)&&(e.needsCheckout=void 0,t(e))},[e,t])}function m(e){let{data:t,mutate:n}=h(),r=null==t?void 0:t.promotionId,o=(0,l.T9)("claude_ai_targeted_promotion","promotionId",null,d.z.string().nullable());return(0,u.useEffect)(()=>{!r&&o&&n({promotionId:o})},[r,o,n]),!!e&&!!(null==t?void 0:t.needsCheckout)&&!!(null==t?void 0:t.promotionId)}let v=()=>{let e=(0,u.useRef)(!1),t=(0,a.Y)(),n=(0,c.A)(),{delete:r}=h();return(0,u.useCallback)(o=>{(null==o?void 0:o.offerError)&&!e.current&&(e.current=!0,t.addError(n.formatMessage({defaultMessage:"This promotion is not available for your account",id:"Vu9kt6ezVH"}),{error:Error(o.offerError),messageForLogging:"This promotion is not available for your account"}),r())},[t,r,n])}}},e=>{e.O(0,[4364,3473,9666,4407,6929,6365,9664,3402,1295,3965,2574,4939,6111,1746,3932,1658,4882,5058,489,5312,6674,5327,7151,6685,3554,2522,623,1154,7854,4328,9626,4813,5622,2290,9736,7289,2167,6614,2531,252,7726,370,8928,4453,1764,8334,8799,6054,1001,8520,5889,587,2225,7358],()=>e(e.s=63039)),_N_E=e.O()}]);