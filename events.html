<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Events â€” Coastal Community of John of the Cross</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="main.css">
  <style>
    /* Local calendar styles */
    main { max-width: 1100px; margin: 2rem auto; padding: 0 1rem; }
    .calendar-container { display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center; }
    .calendar { background: #fff; padding: 1rem; border-radius: 8px; box-shadow: 0 6px 16px rgba(0,0,0,0.06); width: 320px; }
    .calendar .month-title { text-align:center; font-weight:700; margin-bottom:0.5rem; }
    table.calendar-table { width:100%; border-collapse: collapse; }
    table.calendar-table th { text-align:center; padding:0.35rem 0; font-weight:600; color:#333; background:transparent; }
    table.calendar-table td { width:14.285%; height:48px; text-align:center; vertical-align:top; padding:6px; border-radius:6px; }
    td.day { font-weight:600; color:#111; }
    td.empty { color:#bbb; }
    td.today { background:#f0e7db; border:1px solid #e0d6c8; }
    .events-list { margin-top:0.6rem; font-size:0.9rem; color:#333; text-align:left; }
    .events-list li { margin:0.25rem 0; }
    @media (max-width:720px) {
      .calendar { width: 100%; max-width:520px; }
    }
  </style>
</head>
<body>
  <header class="sticky-nav">
    <nav aria-label="Main navigation">
      <div class="nav-container">
        <div class="nav-brand">
          <a href="index.html">Coastal Community of John of the Cross</a>
        </div>
        
        <ul class="main-menu">
          <li><a href="index.html">Home</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle">About Us <span class="dropdown-arrow">â–¾</span></a>
            <div class="dropdown-content">
              <div class="dropdown-section">
                <h4>Our Community</h4>
                <a href="about.html#mission">Our Mission</a>
                <a href="about.html#who-we-are">Who We Are (OCDS / Carmelite Family)</a>
                <a href="about.html#patron-saints">Patron Saints</a>
                <a href="about.html#history">History of Our Community</a>
                <a href="about.html#leadership">Leadership & Contact Team</a>
                <a href="about.html#join">Visit / Join Us</a>
              </div>
              <div class="dropdown-sidebar">
                <img src="https://upload.wikimedia.org/wikipedia/commons/9/9a/John_of_the_Cross_crucifixion_sketch.jpg" alt="St. John of the Cross" class="sidebar-image">
                <a href="about.html" class="learn-more-btn">Learn More</a>
              </div>
            </div>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle">Formation <span class="dropdown-arrow">â–¾</span></a>
            <div class="dropdown-content">
              <div class="dropdown-section">
                <h4>Formation Process</h4>
                <a href="formation.html#what-is">What is OCDS Formation?</a>
                <a href="formation.html#stages">Stages of Formation</a>
                <a href="formation.html#schedule">Schedule of Formation Meetings</a>
                <a href="formation.html#readings">Recommended Readings & Texts</a>
                <a href="formation.html#rule">Rule of Life / Constitutions</a>
                <a href="formation.html#prayer">Prayer & Liturgy of the Hours Guide</a>
                <a href="formation.html#downloads" class="download-all">ðŸ“¥ Download All Documents</a>
              </div>
            </div>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle">Community Life <span class="dropdown-arrow">â–¾</span></a>
            <div class="dropdown-content">
              <div class="dropdown-section">
                <h4>Community Activities</h4>
                <a href="community.html#calendar">Calendar of Meetings</a>
                <a href="community.html#apostolates">Apostolates / Service Projects</a>
                <a href="community.html#gallery">Photo Gallery ðŸ“¸</a>
                <a href="community.html#testimonies">Member Reflections & Testimonies</a>
                <a href="community.html#family">Family Spirituality Corner</a>
              </div>
              <div class="dropdown-sidebar">
                <div class="photo-carousel">
                  <div class="carousel-item active">Beauty of Carmel</div>
                  <div class="carousel-item">Community Life</div>
                  <div class="carousel-item">Spiritual Growth</div>
                </div>
              </div>
            </div>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle">Resources <span class="dropdown-arrow">â–¾</span></a>
            <div class="dropdown-content two-column">
              <div class="dropdown-section">
                <h4>Documents & Writings</h4>
                <a href="resources.html#documents">Carmelite Documents & Writings</a>
                <a href="resources.html#saints">Carmelite Saints Library</a>
                <a href="resources.html#articles">Formation Articles / Blog</a>
                <a href="resources.html#books">Suggested Books / Reading List</a>
              </div>
              <div class="dropdown-section">
                <h4>Multimedia & Links</h4>
                <a href="resources.html#audio">Audio & Video Talks</a>
                <a href="resources.html#provinces">Links to Carmelite Provinces & Orders</a>
                <a href="resources.html">View All Resources</a>
              </div>
            </div>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle active">Events <span class="dropdown-arrow">â–¾</span></a>
            <div class="dropdown-content">
              <div class="dropdown-section">
                <h4>Upcoming Events</h4>
                <a href="events.html#upcoming">ðŸ“… Upcoming Events</a>
                <a href="events.html#retreat">Annual Retreat Info</a>
                <a href="events.html#gatherings">Regional OCDS Gatherings</a>
                <a href="events.html#workshops">Parish Talks & Workshops</a>
                <a href="events.html#register">Register for an Event</a>
              </div>
              <div class="dropdown-sidebar">
                <div class="event-preview">
                  <div class="event-card">Oct 25 â€“ Community Retreat</div>
                  <div class="event-card">Nov 10 â€“ Carmelite Family Day</div>
                  <div class="event-card">Dec 8 â€“ Immaculate Conception Mass</div>
                </div>
              </div>
            </div>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle">Contact <span class="dropdown-arrow">â–¾</span></a>
            <div class="dropdown-content">
              <div class="dropdown-section">
                <h4>Get in Touch</h4>
                <a href="contact.html#form">Contact Form</a>
                <a href="contact.html#directions">Directions & Map</a>
                <a href="contact.html#leadership">Leadership Emails</a>
                <a href="contact.html#prayer">Prayer Intentions Form</a>
                <a href="contact.html#newsletter">Newsletter Signup</a>
              </div>
            </div>
          </li>
        </ul>
        
        <div class="mobile-menu-toggle">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <h1>Events â€” This month and next</h1>
    <p>Below are calendars for the current month and the following month. Click a date to see/attach events (sample events shown).</p>

    <div class="calendar-container" id="calendars"></div>

    <section style="margin-top:1.5rem">
      <h2>Upcoming / Sample events</h2>
      <ul id="event-summary" class="events-list">
        <!-- populated by script -->
      </ul>
    </section>
  </main>

  <!-- FOOTER -->
  <script src="scripts/main.js"></script>

  <script>
    (function(){
      const weekdayNames = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
      const calendarsRoot = document.getElementById('calendars');
      const eventSummary = document.getElementById('event-summary');

      // Sample events map: 'YYYY-MM-DD' => [ 'Event title' , ... ]
      // Replace or extend these with your real events.
      const events = {
        // Example: today's sample event
        // dynamically add a sample for demonstration
      };

      // helper to format YYYY-MM-DD
      function ymd(y,m,d){
        const mm = String(m+1).padStart(2,'0');
        const dd = String(d).padStart(2,'0');
        return `${y}-${mm}-${dd}`;
      }

      // build calendar for given year, month (0-based)
      function buildCalendar(year, month){
        const container = document.createElement('div');
        container.className = 'calendar';

        const title = document.createElement('div');
        title.className = 'month-title';
        const monthName = new Date(year, month).toLocaleString(undefined, { month: 'long' });
        title.textContent = `${monthName} ${year}`;
        container.appendChild(title);

        const table = document.createElement('table');
        table.className = 'calendar-table';
        const thead = document.createElement('thead');
        const headRow = document.createElement('tr');
        weekdayNames.forEach(w => {
          const th = document.createElement('th');
          th.textContent = w;
          headRow.appendChild(th);
        });
        thead.appendChild(headRow);
        table.appendChild(thead);

        const tbody = document.createElement('tbody');
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        let row = document.createElement('tr');
        // empty cells before first day
        for(let i=0;i<firstDay;i++){
          const td = document.createElement('td');
          td.className = 'empty';
          row.appendChild(td);
        }
        const today = new Date();
        for(let day=1, slot=firstDay; day<=daysInMonth; day++, slot++){
          if(slot % 7 === 0){
            tbody.appendChild(row);
            row = document.createElement('tr');
          }
          const td = document.createElement('td');
          td.className = 'day';
          td.dataset.date = ymd(year,month,day);
          td.innerHTML = `<div>${day}</div>`;
          // highlight today
          if(year===today.getFullYear() && month===today.getMonth() && day===today.getDate()){
            td.classList.add('today');
          }
          // if events exist for this date, add a small marker
          const key = td.dataset.date;
          if(events[key] && events[key].length){
            const marker = document.createElement('div');
            marker.style.fontSize = '0.75rem';
            marker.style.marginTop = '4px';
            marker.textContent = events[key].length + ' event' + (events[key].length>1?'s':'');
            td.appendChild(marker);
          }
          // click to show events in summary area
          td.addEventListener('click', () => {
            showEventsForDate(key);
          });
          row.appendChild(td);
        }
        // fill trailing empty cells
        while(row.children.length < 7){
          const td = document.createElement('td');
          td.className = 'empty';
          row.appendChild(td);
        }
        tbody.appendChild(row);
        table.appendChild(tbody);
        container.appendChild(table);
        return container;
      }

      function showEventsForDate(ymdKey){
        eventSummary.innerHTML = '';
        const list = events[ymdKey];
        const title = document.createElement('li');
        title.style.fontWeight = '700';
        title.textContent = `Events for ${ymdKey}:`;
        eventSummary.appendChild(title);
        if(!list || list.length===0){
          const none = document.createElement('li');
          none.textContent = 'No events scheduled.';
          eventSummary.appendChild(none);
          return;
        }
        list.forEach(ev => {
          const li = document.createElement('li');
          li.textContent = ev;
          eventSummary.appendChild(li);
        });
      }

      // prepare sample event(s) for demonstration: add one for today and one next month
      const now = new Date();
      events[ymd(now.getFullYear(), now.getMonth(), now.getDate())] = ['Community prayer â€” 7:00 PM'];
      const nextMonth = new Date(now.getFullYear(), now.getMonth()+1, 1);
      events[ymd(nextMonth.getFullYear(), nextMonth.getMonth(), 10)] = ['Monthly meeting â€” 6:30 PM'];

      // render current month and next month side-by-side
      const curY = now.getFullYear();
      const curM = now.getMonth();
      calendarsRoot.appendChild(buildCalendar(curY, curM));
      // next month handling year rollover
      const nextY = (curM===11) ? curY+1 : curY;
      const nextM = (curM===11) ? 0 : curM+1;
      calendarsRoot.appendChild(buildCalendar(nextY, nextM));

      // show today's events by default
      showEventsForDate(ymd(curY,curM,now.getDate()));
    })();
  </script>
</body>
</html>